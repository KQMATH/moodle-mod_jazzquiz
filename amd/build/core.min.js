define("mod_jazzquiz/core",["exports","core/str","core/ajax","core/notification","mod_jazzquiz/question"],(function(_exports,_str,_ajax,_notification,_question){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * @module    mod_jazzquiz
   * @author    Sebastian S. Gundersen <sebastian@sgundersen.com>
   * @copyright 2014 University of Wisconsin - Madison
   * @copyright 2018 NTNU
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.Quiz=void 0,_exports.initialize=function(courseModuleId,sessionId,attemptId,sessionKey){session.courseModuleId=courseModuleId,session.sessionId=sessionId,session.attemptId=attemptId,session.sessionKey=sessionKey},_exports.setText=async function(element,key,from,args){from=void 0!==from?from:"jazzquiz",args=void 0!==args?args:[],element.innerHTML=await(0,_str.getString)(key,from,args),element.classList.remove("hidden")},_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);let session={courseModuleId:0,sessionId:0,attemptId:0,sessionKey:""};_exports.Quiz=class{constructor(Role){this.state="",this.isNewState=!1,this.question=new _question.Question(this),this.role=new Role(this),this.events={notrunning:"onNotRunning",preparing:"onPreparing",running:"onRunning",reviewing:"onReviewing",sessionclosed:"onSessionClosed",voting:"onVoting"}}changeQuizState(data){this.isNewState=this.state!==data.state,this.state=data.state,void 0!==this.role.onStateChange&&this.role.onStateChange();const event=this.events[data.state];this.role[event](data)}poll(ms){_ajax.default.call({methodname:"mod_jazzquiz_poll",args:{cmid:session.courseModuleId,sessionid:session.sessionId}})[0].done((data=>{this.changeQuizState(data),setTimeout((()=>this.poll(ms)),ms)})).fail(_notification.default.exception)}}}));

//# sourceMappingURL=core.min.js.map