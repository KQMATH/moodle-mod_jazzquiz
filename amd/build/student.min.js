define("mod_jazzquiz/student",["exports","jquery","mod_jazzquiz/core","mod_jazzquiz/question"],(function(_exports,_jquery,_core,_question){var obj;
/**
   * @module    mod_jazzquiz
   * @author    Sebastian S. Gundersen <sebastian@sgundersen.com>
   * @copyright 2014 University of Wisconsin - Madison
   * @copyright 2018 NTNU
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initialize=function(){new _core.Quiz(Student).poll(2e3)},_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};class Student{constructor(quiz){this.quiz=quiz,this.voteAnswer=void 0;let self=this;(0,_jquery.default)(document).on("submit","#jazzquiz_question_form",(function(event){event.preventDefault(),self.submitAnswer()})).on("click","#jazzquiz_save_vote",(function(){self.saveVote()})).on("click",".jazzquiz-select-vote",(function(){self.voteAnswer=this.value}))}onNotRunning(){(0,_core.setText)(_core.Quiz.info,"instructions_for_student")}onPreparing(){(0,_core.setText)(_core.Quiz.info,"wait_for_instructor")}onRunning(data){if(this.quiz.question.isRunning)return;this.quiz.question.startCountdown(data.questiontime,data.delay)||(0,_core.setText)(_core.Quiz.info,"wait_for_instructor")}onReviewing(){this.quiz.question.isVoteRunning=!1,this.quiz.question.isRunning=!1,this.quiz.question.hideTimer(),_core.Quiz.hide(_question.Question.box),(0,_core.setText)(_core.Quiz.info,"wait_for_instructor")}onSessionClosed(){window.location=location.href.split("&")[0]}onVoting(data){if(this.quiz.question.isVoteRunning)return;_core.Quiz.info.html(data.html),_core.Quiz.show(_core.Quiz.info);const options=data.options;for(let i=0;i<options.length;i++)_core.Quiz.addMathjaxElement((0,_jquery.default)("#"+options[i].content_id),options[i].text),"stack"===options[i].question_type&&_core.Quiz.renderMaximaEquation(options[i].text,options[i].content_id);this.quiz.question.isVoteRunning=!0}onTimerTick(timeLeft){(0,_core.setText)(_question.Question.timer,"question_will_end_in_x_seconds","jazzquiz",timeLeft)}submitAnswer(){if(this.quiz.question.isSaving)return;this.quiz.question.isSaving=!0,"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();const serialized=_question.Question.form.serializeArray();let data={};for(let name in serialized)serialized.hasOwnProperty(name)&&(data[serialized[name].name]=serialized[name].value);_core.Ajax.post("save_question",data,(data=>{data.feedback.length>0?_core.Quiz.show(_core.Quiz.info.html(data.feedback)):(0,_core.setText)(_core.Quiz.info,"wait_for_instructor"),this.quiz.question.isSaving=!1,this.quiz.question.isRunning&&(this.quiz.question.isVoteRunning||(_core.Quiz.hide(_question.Question.box),this.quiz.question.hideTimer()))})).fail((()=>{this.quiz.question.isSaving=!1}))}saveVote(){_core.Ajax.post("save_vote",{vote:this.voteAnswer},(data=>{"success"===data.status?(0,_core.setText)(_core.Quiz.info,"wait_for_instructor"):(0,_core.setText)(_core.Quiz.info,"you_already_voted")}))}}}));

//# sourceMappingURL=student.min.js.map